(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[889],{9882:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[event_id]/[user_type]/qr/[camera]",function(){return c(1964)}])},4485:function(e,b,a){"use strict";var f=a(5893),c=a(8019),g=a.n(c),d=a(5675),h=a.n(d);b.Z=function(a){var b=a.setPopup;return(0,f.jsxs)("div",{className:g().failed,children:[(0,f.jsx)("div",{className:g().close,children:(0,f.jsx)(h(),{src:"/images/icon/times.png",width:15,height:15,layout:"fixed",onClick:function(){return b(!1)},alt:"times"})}),(0,f.jsxs)("div",{className:g().content,children:[(0,f.jsx)("div",{className:g().image,children:(0,f.jsx)(h(),{src:"/images/failed.png",objectFit:"contain",width:277,height:280,alt:"failed"})}),(0,f.jsx)("h1",{children:"Something Wrong"}),(0,f.jsx)("p",{children:"Let's try again"})]})]})}},7248:function(d,b,a){"use strict";var e=a(5893),c=a(8019),f=a.n(c);b.Z=function(a){return(0,e.jsx)("div",{className:f().popup,children:a.children})}},9448:function(d,b,a){"use strict";var e=a(5893);a(7294);var f=a(3366),c=a(8019),g=a.n(c);b.Z=function(){return(0,e.jsx)("div",{className:g().loading,children:(0,e.jsx)(f.Z,{})})}},5582:function(g,b,a){"use strict";var h=a(7568),c=a(4051),i=a.n(c),j=a(5893),d=a(8019),k=a.n(d),e=a(5675),l=a.n(e);a(1664);var m=a(7294),f=a(9669),n=a.n(f);b.Z=function(a){var f=a.setPopup,c=a.event_id,d=a.leadName,b=(0,m.useState)(""),e=b[0],g=b[1];return(0,m.useEffect)(function(){var a,d={headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}},b=(a=(0,h.Z)(i().mark(function a(){var b;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,n().get("https://sunniescrmrebornv2.suneducationgroup.com/api/public/event-registration/".concat(c,"/detail"),d);case 3:b=a.sent,console.log(b),g(b.data.data.event_name),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.error(a.t0);case 11:case"end":return a.stop()}},a,null,[[0,8]])})),function(){return a.apply(this,arguments)});c&&b()},[c]),(0,j.jsxs)("div",{className:k().success,children:[(0,j.jsx)("div",{className:k().close,children:(0,j.jsx)(l(),{src:"/images/icon/times.png",width:15,height:15,layout:"fixed",alt:"times",onClick:function(){return f(!1)}})}),(0,j.jsxs)("div",{className:k().content,children:[(0,j.jsx)("div",{className:k().image,children:(0,j.jsx)(l(),{src:"/images/success.png",objectFit:"contain",width:151,height:300,alt:"success"})}),(0,j.jsx)("h1",{children:"Attended Success"}),(0,j.jsxs)("p",{children:["Hi ",d,", Welcome to ",e]})]})]})}},3366:function(e,b,a){"use strict";var f=a(5893);a(7294);var c=a(5675),g=a.n(c),d=a(3148),h=a.n(d);b.Z=function(){return(0,f.jsx)("div",{className:h().loading,children:(0,f.jsx)(g(),{src:"/images/icon/Loading.svg",width:100,height:100,objectFit:"contain",alt:"loading"})})}},638:function(c,a,b){"use strict";var d=b(6856).Z;Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(b,g){var c=e.default,a={loading:function(a){return a.error,a.isLoading,a.pastDelay,null}};if(d(b,Promise)?a.loader=function(){return b}:"function"==typeof b?a.loader=b:"object"==typeof b&&(a=f({},a,b)),(a=f({},a,g)).loadableGenerated&&delete(a=f({},a,a.loadableGenerated)).loadableGenerated,"boolean"==typeof a.ssr&&!a.suspense){if(!a.ssr)return delete a.ssr,h(c,a);delete a.ssr}return c(a)},a.noSSR=h,g(b(7294));var e=g(b(4302));function f(){return(f=Object.assign||function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}function g(a){return a&&a.__esModule?a:{default:a}}function h(b,a){return delete a.webpack,delete a.modules,b(a)}("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&& void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),c.exports=a.default)},6319:function(e,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.LoadableContext=void 0;var a,f,d=(a=c(7294),a&&a.__esModule?a:{default:a}).default.createContext(null);b.LoadableContext=d},4302:function(e,d,a){"use strict";var b,f=a(9658).Z,g=a(7222).Z;Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var h=(b=a(7294),b&&b.__esModule?b:{default:b}),i=a(6319);function j(){return(j=Object.assign||function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}var k=a(7294).useSyncExternalStore,l=[],m=[],n=!1;function o(b){var c=b(),a={loading:!0,loaded:null,error:null};return a.promise=c.then(function(b){return a.loading=!1,a.loaded=b,b}).catch(function(b){throw a.loading=!1,a.error=b,b}),a}var p=function(){function a(b,c){f(this,a),this._loadFn=b,this._opts=c,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return g(a,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var c=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var b=this._res,a=this._opts;if(b.loading){if("number"==typeof a.delay){if(0===a.delay)this._state.pastDelay=!0;else{var d=this;this._delay=setTimeout(function(){d._update({pastDelay:!0})},a.delay)}}if("number"==typeof a.timeout){var e=this;this._timeout=setTimeout(function(){e._update({timedOut:!0})},a.timeout)}}this._res.promise.then(function(){c._update({}),c._clearTimeouts()}).catch(function(a){c._update({}),c._clearTimeouts()}),this._update({})}},{key:"_update",value:function(a){this._state=j({},this._state,{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},a),this._callbacks.forEach(function(a){return a()})}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return this._state}},{key:"subscribe",value:function(a){var b=this;return this._callbacks.add(a),function(){b._callbacks.delete(a)}}}]),a}();function c(a){return function(e,c){var f=function(){if(!l){var b=new p(e,a);l={getCurrentValue:b.getCurrentValue.bind(b),subscribe:b.subscribe.bind(b),retry:b.retry.bind(b),promise:b.promise.bind(b)}}return l.promise()},g=function(){f();var b=h.default.useContext(i.LoadableContext);b&&Array.isArray(a.modules)&&a.modules.forEach(function(a){b(a)})},a=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null,suspense:!1},c);a.suspense&&(a.lazy=h.default.lazy(a.loader));var l=null;if(!n){var d=a.webpack?a.webpack():a.modules;d&&m.push(function(h){var a=!0,c=!1,e=void 0;try{for(var g,b=d[Symbol.iterator]();!(a=(g=b.next()).done);a=!0){var i=g.value;if(-1!==h.indexOf(i))return f()}}catch(j){c=!0,e=j}finally{try{a||null==b.return||b.return()}finally{if(c)throw e}}})}var b=a.suspense?function(b,c){return g(),h.default.createElement(a.lazy,j({},b,{ref:c}))}:function(b,c){g();var d=k(l.subscribe,l.getCurrentValue,l.getCurrentValue);return h.default.useImperativeHandle(c,function(){return{retry:l.retry}},[]),h.default.useMemo(function(){var c;return d.loading||d.error?h.default.createElement(a.loading,{isLoading:d.loading,pastDelay:d.pastDelay,timedOut:d.timedOut,error:d.error,retry:l.retry}):d.loaded?h.default.createElement((c=d.loaded)&&c.__esModule?c.default:c,b):null},[b,d])};return b.preload=function(){return f()},b.displayName="LoadableComponent",h.default.forwardRef(b)}(o,a)}function q(a,c){for(var b=[];a.length;){var d=a.pop();b.push(d(c))}return Promise.all(b).then(function(){if(a.length)return q(a,c)})}c.preloadAll=function(){return new Promise(function(a,b){q(l).then(a,b)})},c.preloadReady=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:[];return new Promise(function(c){var b=function(){return n=!0,c()};q(m,a).then(b,b)})},window.__NEXT_PRELOADREADY=c.preloadReady,d.default=c},1964:function(i,b,a){"use strict";a.r(b),a.d(b,{default:function(){return x}});var j=a(5893),k=a(1163),l=a(7568),c=a(4051),m=a.n(c),d=a(5306),n=a.n(d),o=a(7294),e=a(5152),f=a.n(e),p=a(7248),q=a(5582),r=a(4485),s=a(9448),g=a(9669),t=a.n(g),h=a(5675),u=a.n(h),v=f()(function(){return a.e(164).then(a.t.bind(a,7164,23))},{loadableGenerated:{webpack:function(){return[7164]}},ssr:!1}),w=function(a){var w=a.event_id,b=a.camera,c=(0,o.useState)(!1),x=c[0],y=c[1],d=(0,o.useState)(!1),z=d[0],e=d[1],f=(0,o.useState)(!1),A=f[0],G=f[1],g=(0,o.useState)(!1),B=g[0];g[1];var C,D,h=(0,o.useState)(""),E=h[0],H=h[1],i=(0,o.useState)("No result"),I=(i[0],i[1]),J=(0,k.useRouter)(),F=(C=(0,l.Z)(m().mark(function a(b){var c;return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!b){a.next=20;break}return G(!0),I(b),console.log(b),K(b),a.prev=5,a.next=8,t().post("https://sunniescrmrebornv2.suneducationgroup.com/api/public/event-registration/".concat(w,"/leads/scan/qr-code"),{register_id:b},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 8:c=a.sent,console.log(c),y(!0),G(!1),setTimeout(function(){J.replace("/".concat(w))},1e4),a.next=20;break;case 15:a.prev=15,a.t0=a.catch(5),console.error(a.t0),e(!0),G(!1);case 20:case"end":return a.stop()}},a,null,[[5,15]])})),function(a){return C.apply(this,arguments)}),K=(D=(0,l.Z)(m().mark(function a(b){var c;return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t().get("https://sunniescrmrebornv2.suneducationgroup.com/api/public/event-registration/".concat(w,"/leads/search?search_by=admin&search_column=register_id&search_value=").concat(b,"&all_event=false&userpage_size=10&page=1"),{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 3:c=a.sent,console.log(c.data.data[0].full_name),H(c.data.data[0].full_name),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.error(a.t0);case 11:case"end":return a.stop()}},a,null,[[0,8]])})),function(a){return D.apply(this,arguments)});return(0,o.useEffect)(function(){console.log(B)},[B]),b&&(0,j.jsxs)("div",{className:n().qr_scanner,children:[x&&(0,j.jsx)(p.Z,{children:(0,j.jsx)(q.Z,{setPopup:y,event_id:w,leadName:E})}),z&&(0,j.jsx)(p.Z,{children:(0,j.jsx)(r.Z,{setPopup:e})}),A&&(0,j.jsx)(p.Z,{children:(0,j.jsx)(s.Z,{setPopup:e})}),(0,j.jsxs)("div",{className:n().header_qr,children:[(0,j.jsx)("div",{style:{display:"flex",alignItems:"center",marginRight:"10px",cursor:"pointer"},onClick:function(){return J.back()},children:(0,j.jsx)(u(),{src:"/images/icon/arrow-left.png",width:25,height:20,alt:"back",objectFit:"contain"})}),(0,j.jsx)("h1",{children:"Scan QR"})]}),(0,j.jsxs)("div",{className:n().scanner,children:[(0,j.jsx)("div",{className:n().camera,children:(0,j.jsx)(v,{delay:500,onError:function(a){console.error(a)},onScan:F,style:{width:"100%"},constraints:{facingMode:"front"===b?"user":"environment"}})}),(0,j.jsx)("p",{children:"Place the QR Code in the box"})]})]})},x=function(){var a=(0,k.useRouter)().query,b=a.event_id,c=a.camera;return(0,j.jsx)(w,{event_id:b,camera:c})}},8019:function(a){a.exports={popup:"Layout_popup__lrYqC",close:"Layout_close___DQpU",success:"Layout_success__8WGmA",content:"Layout_content__FPTH4",failed:"Layout_failed__26gXS",unattendance:"Layout_unattendance__VjZlo"}},3148:function(a){a.exports={loading:"loading_loading__w8Gp2",loading_page:"loading_loading_page__cH6wJ",enter_id:"loading_enter_id__3CoQn",not_found:"loading_not_found__AGOts"}},5306:function(a){a.exports={qr_scanner:"qr-scanner_qr_scanner__upprm",header_qr:"qr-scanner_header_qr__mfhqF",scanner:"qr-scanner_scanner__iiYDK",camera:"qr-scanner_camera__0m4Wj"}},5152:function(a,c,b){a.exports=b(638)},1163:function(a,c,b){a.exports=b(387)}},function(a){a.O(0,[487,774,888,179],function(){var b;return a(a.s=9882)}),_N_E=a.O()}])